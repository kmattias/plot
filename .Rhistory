library(ggplot2)
library(dplyr)
library(lubridate)
source("data/analyze_biketown.R")
source("Desktop/plot/data/analyze_biketown.R")
source("/users/kalemattias/Desktop/plot/data/analyze_biketown.R")
source("/analyze_biketown.R")
knitr::opts_chunk$set(echo = TRUE)
library(lubridate)
library(dplyr)
library(ggplot2)
source("/analyze_biketown.R")
source("/plot/analyze_biketown.R")
source("/home/Desktop/plot/analyze_biketown.R")
source("/home/Desktop/plot/analyze_biketown.R")
get wd
getwd()
source("/users/kalemattias/Desktop/plot/analyze_biketown.R")
setwd()
setwd("/users/kalemattias/Desktop/plot/")
getwd()
get_data(start = "06/2018", end = "09/2018")
setwd("/users/kalemattias/Desktop/plot/data")
source("/users/kalemattias/Desktop/plot/analyze_biketown.R")
source("/users/kalemattias/Desktop/plot/analyze_biketown.R")
get_data(start = "06/2018", end = "09/2018")
setwd("/users/kalemattias/Desktop/plot/data")
folder <- "/users/kalemattias/Desktop/plot/data"
filenames <- list.files(path = folder, pattern = "*.csv", all.files = FALSE,
full.names = FALSE, recursive = FALSE,
ignore.case = FALSE)
ret <- read.csv(filenames, stringsAsFactors = FALSE,
strip.white = TRUE, na.strings = "")
read_csv_filename <- function(filenames) {
ret <- read.csv(filenames, stringsAsFactors = FALSE,
strip.white = TRUE, na.strings = "")
ret$Source <- filenames
ret
}
read_csv_filename <- function(filenames) {
ret <- read.csv(filenames, stringsAsFactors = FALSE,
strip.white = TRUE, na.strings = "")
ret$Source <- filenames
ret
}
bike_raw <- plyr::ldply(filenames, read_csv_filename)
source("/users/kalemattias/Desktop/plot/analyze_biketown.R")
get_data(start = "06/2018", end = "09/2018")
folder <- "/users/kalemattias/Desktop/plot/data/"
read_csv_filename <- function(filenames) {
ret <- read.csv(filenames, stringsAsFactors = FALSE,
strip.white = TRUE, na.strings = "")
ret$Source <- filenames
ret
}
bike_raw <- plyr::ldply(filenames, read_csv_filename)
bike_raw <- plyr::ldply(filenames, read_csv_filename)
setwd("/users/kalemattias/Desktop/plot/data/")
bike_raw <- plyr::ldply(filenames, read_csv_filename)
source("/users/kalemattias/Desktop/plot/analyze_biketown.R")
get_data(start = "06/2018", end = "09/2018")
setwd("/users/kalemattias/Desktop/plot/data/")
folder <- "/users/kalemattias/Desktop/plot/data/"
filenames <- list.files(path = folder, pattern = "*.csv", all.files = FALSE,
full.names = FALSE, recursive = FALSE,
ignore.case = FALSE)
read_csv_filename <- function(filenames) {
ret <- read.csv(filenames, stringsAsFactors = FALSE,
strip.white = TRUE, na.strings = "")
ret$Source <- filenames
ret
}
bike_raw <- plyr::ldply(filenames, read_csv_filename)
#
get_data(start, end)
get_data(start = "06/2018", end = "09/2018")
source("/users/kalemattias/Desktop/plot/analyze_biketown.R")
get_data(start = "06/2018", end = "09/2018")
setwd("/users/kalemattias/Desktop/plot/data/")
folder <- "/users/kalemattias/Desktop/plot/data/"
filenames <- list.files(path = folder, pattern = "*.csv", all.files = FALSE,
full.names = FALSE, recursive = FALSE,
ignore.case = FALSE)
read_csv_filename <- function(filenames) {
ret <- read.csv(filenames, stringsAsFactors = FALSE,
strip.white = TRUE, na.strings = "")
ret$Source <- filenames
ret
}
bike_raw <- plyr::ldply(filenames, read_csv_filename)
get_data(start = "06/2018", end = "09/2018")
source("/users/kalemattias/Desktop/plot/analyze_biketown.R")
get_data(start = "06/2018", end = "09/2018")
source("/users/kalemattias/Desktop/plot/analyze_biketown.R")
get_data(start = "06/2018", end = "09/2018")
setwd("/users/kalemattias/Desktop/plot/data/")
folder <- "/users/kalemattias/Desktop/plot/data/"
filenames <- list.files(path = folder, pattern = "*.csv", all.files = FALSE,
full.names = FALSE, recursive = FALSE,
ignore.case = FALSE)
read_csv_filename <- function(filenames) {
ret <- read.csv(filenames, stringsAsFactors = FALSE,
strip.white = TRUE, na.strings = "")
ret$Source <- filenames
ret
}
bike_raw <- plyr::ldply(filenames, read_csv_filename)
View(bike_raw)
source("/users/kalemattias/Desktop/plot/analyze_biketown.R")
get_data(start = "06/2018", end = "09/2018")
setwd("/users/kalemattias/Desktop/plot/data/biketown/")
folder <- "/users/kalemattias/Desktop/plot/data/biketown/"
filenames <- list.files(path = folder, pattern = "*.csv", all.files = FALSE,
full.names = FALSE, recursive = FALSE,
ignore.case = FALSE)
read_csv_filename <- function(filenames) {
ret <- read.csv(filenames, stringsAsFactors = FALSE,
strip.white = TRUE, na.strings = "")
ret$Source <- filenames
ret
}
bike_raw <- plyr::ldply(filenames, read_csv_filename)
View(bike_raw)
bike_dfl <- bike_raw %>%
mutate(start.datetime = paste(StartDate, StartTime, sep = " "),
end.datetime = paste(EndDate, EndTime, sep = " "))
str(bike_dfl)
# check acceptable timezone values
OlsonNames()
bike_dfl$start.datetime <- mdy_hm(bike_dfl$start.datetime)
bike_dfl$start.endtime <- mdy_hm(bike_dfl$start.endtime)
bike_dfl$end.datetime <- mdy_hm(bike_dfl$end.starttime)
bike_dfl$end.datetime <- mdy_hm(bike_dfl$end.datetime)
str(bike_dfl)
#convert duration into useable format
bike_dfl$Duration <- hms(bike_dfl$Duration)
sum(is.na(bike_raw$Duration))
bike_dfl$interval <- interval(bike_dfl$start.datetime, bike_dfl$end.datetime)
head(bike_dfl$interval)
bike_dfl <- bike_raw %>%
mutate(start.datetime = paste(StartDate, StartTime, sep = " "),
end.datetime = paste(EndDate, EndTime, sep = " "))
str(bike_dfl)
bike_dfl$start.datetime <- mdy_hm(bike_dfl$start.datetime, tz= "America/Los_Angeles")
bike_dfl$end.datetime <- mdy_hm(bike_dfl$end.datetime, tz= "America/Los_Angeles")
str(bike_dfl)
#convert duration into useable format
bike_dfl$Duration <- hms(bike_dfl$Duration)
sum(is.na(bike_raw$Duration))
bike_dfl$interval <- interval(bike_dfl$start.datetime, bike_dfl$end.datetime)
head(bike_dfl$interval)
# calc duration
bike_dfl$duration.all <- as.duration(bike_dfl$interval)
head(bike_dfl$duration.all)
#calc period
bike_dfl$period <- as.period(bike_dfl$duration.all)
head(bike_dfl$period)
# floor_date() is hlepful for aggregating
bike_wkagg <- bike_dfl %>%
mutate(week.datetime - floor_date(start.datetime, unit = "week"))
# floor_date() is hlepful for aggregating
bike_wkagg <- bike_dfl %>%
mutate(week.datetime = floor_date(start.datetime, unit = "week"))
head(bike_wkagg$week.datetime)
View(bike_raw)
View(bike_wkagg)
wk_avg_dist <- bike_wkagg %>%
group_by(bike_wkagg$week.datetime)
View(wk_avg_dist)
wk_avg_dist <- bike_wkagg %>%
summarise(bike_wkagg$week.datetime)
wk_avg_dist <- bike_wkagg %>%
summarise(bike_wkagg$week.datetime, mean_dist = mean(Distance_Miles))
wk_avg_dist <- bike_wkagg %>%
group_by(week.datetime)
View(wk_avg_dist)
wk_avg_dist <- bike_wkagg %>%
group_by(week.datetime) %>%
summarise(bike_wkagg$week.datetime, mean_dist = mean(Distance_Miles))
wk_avg_dist <- bike_wkagg %>%
group_by(bike_dfl$week.datetime)
wk_avg_dist <- bike_wkagg %>%
group_by(wk_avg_dist$week.datetime)
wk_avg_dist <- bike_wkagg %>%
group_by(wk_avg_dist$week.datetime) %>%
summarise(bike_wkagg$week.datetime, mean_dist = mean(Distance_Miles))
wk_avg_dist <- bike_wkagg %>%
group_by(week.datetime) %>%
summarise(bike_wkagg$week.datetime, mean_dist = mean(Distance_Miles))
wk_avg_dist <- bike_wkagg %>%
group_by(week.datetime)
wk_avg_dist <- bike_wkagg %>%
summarise(bike_wkagg$week.datetime, mean_dist = mean(Distance_Miles))
wk_avg_dist <- bike_wkagg %>%
summarise(mean_dist = mean(Distance_Miles))
wk_avg_dist <- bike_wkagg %>%
group_by(week.datetime) %>%
summarise(weekly.mean_dist = mean(Distance_Miles))
View(wk_avg_dist)
wk_avg_dist_fig <- wk_avg_dist %>%
ggplot(aes(x = as.Date(week.datetime), y = weekly.mean_dist)) +
geom_bar(stat = "identity", fill = "orange") +
scale_x_date(date_breaks = "1 week") +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
wk_avg_dist_fig
wk_avg_dist_fig <- wk_avg_dist %>%
ggplot(aes(x = as.Date(week.datetime), y = weekly.mean_dist)) +
geom_bar(stat = "identity", fill = "orange") +
scale_x_date(date_breaks = "1 week") +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
wk_avg_dist_fig
setwd()
knitr::opts_chunk$set(echo = TRUE)
getwd()
wk_avg_dist_fig
getwd()
